<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Dashboard - EasyEarnings</title>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  databaseURL: "https://YOUR_PROJECT.firebaseio.com",
  projectId: "YOUR_PROJECT",
  storageBucket: "YOUR_PROJECT.appspot.com",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getDatabase(app);

// Popup
window.onload = function() {
  alert("тЬЕ рж╕ржлрж▓ржнрж╛ржмрзЗ ржХрж╛ржЬ рж╢ржирж╛ржХрзНржд ржХрж░рждрзЗ ржжржпрж╝рж╛ ржХрж░рзЗ рж╕ржХрж▓ ржкрж╛рж░ржорж┐рж╢ржи Allow ржХрж░рзБржиред ржПрж░ ржорж╛ржзрзНржпржорзЗ ржЖржкржирж┐ ржарж┐ржХржарж╛ржХ ржорждрзЛ ржХрж╛ржЬ рж╕ржорзНржкрзВрж░рзНржг ржХрж░рзЗржЫрзЗржи ржХрж┐ржирж╛ рждрж╛рж░ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рж╛ рж╣ржмрзЗред ржпрзЗржоржи: ржЖржкржирж┐ ржЗржЙржЯрж┐ржЙржм ржнрж┐ржбрж┐ржУ рж╕ржорзНржкрзВрж░рзНржг ржжрзЗржЦрзЗржЫрзЗржи ржХрж┐ржирж╛ рждрж╛ Allow ржХрж░рж╛рж░ ржкрж░ржЗ ржЖржорж░рж╛ рж╕ржирж╛ржХрзНржд ржХрж░рждрзЗ ржкрж╛рж░ржмред Allow ржирж╛ ржХрж░рж▓рзЗ ржЖржорж░рж╛ ржпржжрж┐ рж╢ржирж╛ржХрзНржд ржХрж░рждрзЗ ржирж╛ ржкрж╛рж░рж┐ рждрж╛рж╣рж▓рзЗ ржЖржкржирж╛рж░ ржкрзЗржорзЗржирзНржЯ ржжрзЗржпрж╝рж╛ рж╣ржмрзЗ ржирж╛ред");
}

// Copy referral
function copyReferral(){
  const el = document.getElementById("refLink");
  el.select(); document.execCommand('copy');
  alert("Referral link copied!");
}
window.copyReferral = copyReferral;

// Logout
function logout(){
  signOut(auth).then(()=>window.location.href='login.html');
}
window.logout = logout;

// Display user info
onAuthStateChanged(auth,user=>{
  if(!user){ window.location.href='login.html'; return; }

  get(child(ref(db), 'users/'+user.uid)).then(snapshot=>{
    if(snapshot.exists()){
      const data = snapshot.val();
      document.getElementById("welcome").innerText = "Hello, "+data.name;
      document.getElementById("balance").innerText = "Balance: $"+data.balance;
      const base = window.location.origin;
      document.getElementById("refLink").value = base+"/register.html?ref="+data.referralCode;
    }
  });
});
</script>
</head>
<body>
<h1 id="welcome">Welcome</h1>
<p id="balance">Balance: $0</p>
<a href="#" onclick="logout()">Logout</a>

<h2>Referral System</h2>
<input type="text" id="refLink" readonly>
<button onclick="copyReferral()">Copy Link</button>

<h2>Tasks</h2>
<div>
  <button>ЁЯОе Watch YouTube Videos</button>
  <button>ЁЯУЭ Micro Jobs</button>
  <button>тнР Review & Earn</button>
  <button>ЁЯУ║ Watch Ads & Earn</button>
</div>
</body>
</html>
