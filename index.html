<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Dashboard - EasyEarnings</title>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyD-mdI3OlZDe9mtpKXyDjclrr1IE0LZJSc",
  authDomain: "view-49d26.firebaseapp.com",
  databaseURL: "https://view-49d26-default-rtdb.firebaseio.com",
  projectId: "view-49d26",
  storageBucket: "view-49d26.appspot.com",
  messagingSenderId: "462642880975",
  appId: "1:462642880975:web:d2b4b5f5f53a583986f2ba"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getDatabase(app);

window.onload = function(){
  alert("‚úÖ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶æ‡¶ú ‡¶∂‡¶®‡¶æ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶§‡ßá ‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡¶ï‡¶≤ ‡¶™‡¶æ‡¶∞‡¶Æ‡¶ø‡¶∂‡¶® Allow ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶è‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶†‡¶ø‡¶ï‡¶†‡¶æ‡¶ï ‡¶Æ‡¶§‡ßã ‡¶ï‡¶æ‡¶ú ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶® ‡¶ï‡¶ø‡¶®‡¶æ ‡¶§‡¶æ‡¶∞ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá‡•§ ‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶Ü‡¶™‡¶®‡¶ø ‡¶á‡¶â‡¶ü‡¶ø‡¶â‡¶¨ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶¶‡ßá‡¶ñ‡ßá‡¶õ‡ßá‡¶® ‡¶ï‡¶ø‡¶®‡¶æ ‡¶§‡¶æ Allow ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡¶∞‡¶á ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶∏‡¶®‡¶æ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡•§ Allow ‡¶®‡¶æ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶Ø‡¶¶‡¶ø ‡¶∂‡¶®‡¶æ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶§‡ßá ‡¶®‡¶æ ‡¶™‡¶æ‡¶∞‡¶ø ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶¶‡ßá‡¶Ø‡¶º‡¶æ ‡¶π‡¶¨‡ßá ‡¶®‡¶æ‡•§");
}

function copyReferral(){
  const el = document.getElementById("refLink");
  el.select(); document.execCommand('copy');
  alert("Referral link copied!");
}
window.copyReferral = copyReferral;

function logout(){
  signOut(auth).then(()=>window.location.href='login.html');
}
window.logout = logout;

onAuthStateChanged(auth, user=>{
  if(!user){ window.location.href='login.html'; return; }

  get(child(ref(db),'users/'+user.uid)).then(snapshot=>{
    if(snapshot.exists()){
      const data = snapshot.val();
      document.getElementById("welcome").innerText = "Hello, "+data.name;
      document.getElementById("balance").innerText = "Balance: $"+data.balance;
      document.getElementById("refCount").innerText = "Referrals: "+(data.referralCount || 0);
      const base = window.location.origin;
      document.getElementById("refLink").value = base+"/register.html?ref="+(data.referralCode || '');
    }
  });
});
</script>

<style>
  body { font-family: Arial, sans-serif; padding:20px; background:#f0f4f8; }
  h1,h2 { color:#0f766e; }
  input { padding:8px; width:300px; margin:5px 0; }
  button { padding:8px 12px; background:#0f766e; color:#fff; border:none; cursor:pointer; }
  .task-blocks button { margin:5px; width:200px; height:50px; font-size:16px; }
</style>
</head>
<body>
<h1 id="welcome">Welcome</h1>
<p id="balance">Balance: $0</p>
<a href="#" onclick="logout()">Logout</a>

<h2>Referral System</h2>
<input type="text" id="refLink" readonly>
<button onclick="copyReferral()">Copy Link</button>
<p id="refCount">Referrals: 0</p>

<h2>Tasks</h2>
<div class="task-blocks">
  <button>üé• Watch YouTube Videos</button>
  <button>üìù Micro Jobs</button>
  <button>‚≠ê Review & Earn</button>
  <button>üì∫ Watch Ads & Earn</button>
</div>
</body>
</html>
